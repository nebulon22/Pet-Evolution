<!DOCTYPE html>
<html>
<head>
  <title>Pet Evolusi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      text-align: center;
      background: #2e7d32;
      color: white;
      font-family: sans-serif;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h2 { margin-top: 10px; font-size: 6vw; }

    .pet-wrapper {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 20px;
    }

    /* Pet responsif */
    #pet {
      width: 50vw;       /* 50% dari lebar layar */
      max-width: 220px;  /* batas maksimum */
      height: auto;
    }

    /* Bubble overlay */
    #bubble {
      position: absolute;
      left: 60%; top: 20%;
      background: white; color: black;
      padding: 8px 12px; border-radius: 12px;
      display: none; max-width: 150px; text-align: left;
      z-index: 2;
      font-size: 3.5vw;
    }
    #bubble::after {
      content: "";
      position: absolute;
      left: -10px; top: 20px;
      border-width: 10px;
      border-style: solid;
      border-color: transparent white transparent transparent;
    }

    /* Thermometer kiri responsif */
    .thermometer {
      position: fixed;
      left: 4vw; top: 20%;
      transform: translateY(-50%);
      width: 6vw; max-width: 30px;
      height: 40vh;
      background: #444; border-radius: 15px;
      overflow: hidden; border: 2px solid #ccc;
    }
    .thermo-fill {
      position: absolute; bottom: 0; width: 100%; height: 0%;
      transition: height 0.5s ease, background 0.5s ease;
      background: green;
    }

    /* EXP Bar responsif */
    .bar-container {
      width: 80vw;
      max-width: 500px;
      margin: 10px auto;
      background: #444; border-radius: 10px;
      overflow: hidden; height: 20px;
    }
    #expBar {
      height: 100%; width: 0%;
      text-align: center; color: white;
      font-size: 3.5vw; line-height: 20px;
      background: dodgerblue; transition: width 0.5s ease;
    }

    button {
      margin: 10px;
      padding: 12px 24px;
      font-size: 4vw;
      border-radius: 10px;
    }

    @keyframes breathing {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    @keyframes hungry-shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    .breathing { animation: breathing 3s infinite; }
    .hungry { animation: hungry-shake 0.5s infinite; }
  </style>
</head>
<body>
  <h2>üê£ Pet Evolusi</h2>

  <div class="pet-wrapper">
    <img id="pet" src="egg1.png" class="breathing">
    <div id="bubble"></div>
  </div>
  
  <p style="font-size:4vw;">Level: <span id="level">1</span></p>

  <div class="thermometer">
    <div id="thermoFill" class="thermo-fill"></div>
  </div>

  <div class="bar-container">
    <div id="expBar">EXP</div>
  </div>

  <button onclick="feedPet()">üçñ Feed</button>
  <button onclick="resetGame()">üîÑ Reset</button>

<script>
let pet = JSON.parse(localStorage.getItem("petData")) || { level: 1, exp: 0, stage: "egg", hunger: 30 };

function getPetImage(stage){
  switch(stage){
    case "egg": return "egg1.png";
    case "chick": return "chick.png";
    case "rooster": return "ayam2.png";
    case "phoenix": return "pinix.png";
    default: return "egg1.png";
  }
}

function updateUI(){
  document.getElementById("level").textContent = pet.level;
  document.getElementById("pet").src = getPetImage(pet.stage);

  const thermo = document.getElementById("thermoFill");
  thermo.style.height = pet.hunger + "%";
  if(pet.hunger > 70) thermo.style.background = "green";
  else if(pet.hunger > 30) thermo.style.background = "gold";
  else thermo.style.background = "red";

  const expPercent = (pet.exp / 10) * 100;
  const expBar = document.getElementById("expBar");
  expBar.style.width = expPercent + "%";
  expBar.textContent = "EXP " + pet.exp + "/10";

  const petImg = document.getElementById("pet");
  if(pet.hunger <= 30) {
    petImg.classList.remove("breathing");
    petImg.classList.add("hungry");
  } else {
    petImg.classList.remove("hungry");
    petImg.classList.add("breathing");
  }

  localStorage.setItem("petData", JSON.stringify(pet));
}

function showBubble(text){
  const bubble = document.getElementById("bubble");
  bubble.textContent = text;
  bubble.style.display = "block";
  setTimeout(()=> bubble.style.display="none", 2500);
}

function feedPet(){
  pet.hunger = Math.min(100, pet.hunger + 20);
  pet.exp++;
  if(pet.exp >= 10){ 
    pet.exp = 0; 
    pet.level++;
    if(pet.level == 10) pet.stage = "chick";
    if(pet.level == 20) pet.stage = "rooster";
    if(pet.level == 30) pet.stage = "phoenix";
  }
  updateUI();
}

setInterval(()=>{
  pet.hunger = Math.max(0, pet.hunger - 5);
  if(pet.hunger < 50 && Math.random() < 0.3){
    showBubble("Aku lapar ü•∫");
  }
  updateUI();
}, 5000);

function resetGame(){
  localStorage.removeItem("petData");
  pet = { level: 1, exp: 0, stage: "egg", hunger: 30 };
  updateUI();
  alert("Game direset! Pet kamu lapar ü•∫");
}

updateUI();
</script>
</body>
</html>

